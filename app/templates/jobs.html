{% extends "base.html" %}

{% block content %}
<div class="container section-spacer">
    <div id="admin-job-form" class="card" style="display: none; margin-bottom: 40px;">
        <h2 class="section-title" style="margin-top: 0; text-align: left;">Post a New Job</h2>
        <form id="add-job-form">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="form-group">
                    <label>Job Title</label>
                    <input type="text" id="job-title" required placeholder="e.g. Software Engineer">
                </div>
                <div class="form-group">
                    <label>Company</label>
                    <input type="text" id="job-company" required placeholder="e.g. Google">
                </div>
            </div>
            <div class="form-group">
                <label>Description</label>
                <textarea id="job-desc" rows="4" required placeholder="Tell us about the role..."></textarea>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="form-group">
                    <label>Minimum CGPA</label>
                    <input type="number" id="job-cgpa" step="0.1" value="0.0">
                </div>
                <div class="form-group">
                    <label>Deadline (YYYY-MM-DD)</label>
                    <input type="date" id="job-deadline" required>
                </div>
            </div>
            <button type="submit" class="btn btn-primary" style="width: auto;">Post Job</button>
        </form>
    </div>

    <h2 class="section-title" style="text-align: left;">Available Jobs & Internships</h2>
    <div id="job-list" class="job-grid">
        <!-- Jobs will be loaded here -->
        <p>Loading jobs...</p>
    </div>

    <!-- Job Details Modal -->
    <div id="job-details-modal"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2000; align-items: center; justify-content: center;">
        <div class="card" style="width: 600px; max-height: 80vh; overflow-y: auto; padding: 40px; position: relative;">
            <button onclick="document.getElementById('job-details-modal').style.display='none'"
                style="position: absolute; top: 20px; right: 20px; background: none; border: none; font-size: 24px; cursor: pointer; color: #999;">&times;</button>
            <div id="job-details-content">
                <!-- Data populated via JS -->
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        loadJobs();
        const user = JSON.parse(localStorage.getItem('user'));
        if (user && user.role === 'admin') {
            document.getElementById('admin-job-form').style.display = 'block';
        }
    });
</script>
{% endblock %}