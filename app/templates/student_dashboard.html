{% extends "base.html" %}

{% block content %}
<div class="container section-spacer">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <div>
            <h2 class="section-title" style="margin-bottom: 5px;">Student Dashboard</h2>
            <p style="color: #666;">Welcome back, {{ profile.full_name if profile else 'Student' }}!</p>
        </div>
        <a href="{{ url_for('main.portfolio_page') }}" class="btn btn-secondary btn-small">Update
            Portfolio</a>
    </div>

    <div class="grid" style="grid-template-columns: 2fr 1fr;">
        <div class="card">
            <h3>My Applications</h3>
            {% if applications %}
            <div style="margin-top: 20px;">
                {% for app in applications %}
                <div
                    style="display: flex; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid #eee;">
                    <div>
                        <p style="font-weight: 700; margin-bottom: 5px;">{{ app.job.title }}</p>
                        <p style="font-size: 13px; color: var(--secondary-teal);">{{ app.job.company }}</p>
                    </div>
                    <div style="text-align: right;">
                        <span class="badge" style="background: var(--primary-blue);">{{ app.status }}</span>
                        <p style="font-size: 11px; color: #999; margin-top: 5px;">Applied on {{
                            app.job.posted_date.strftime('%d %b %Y') }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p style="color: #999; margin-top: 20px;">You haven't applied to any jobs yet.</p>
            <a href="{{ url_for('main.jobs_page') }}" class="btn btn-primary" style="margin-top: 20px;">Explore Jobs</a>
            {% endif %}
        </div>

        <div class="card">
            <h3>Profile Summary</h3>
            <div style="margin-top: 20px;">
                <div style="margin-bottom: 20px;">
                    <p style="font-size: 12px; color: #999; text-transform: uppercase; font-weight: 700;">Department</p>
                    <p style="font-weight: 600;">{{ profile.department if profile else 'Not Set' }}</p>
                </div>
                <div style="margin-bottom: 20px;">
                    <p style="font-size: 12px; color: #999; text-transform: uppercase; font-weight: 700;">Current CGPA
                    </p>
                    <p style="font-weight: 600; font-size: 1.5rem; color: var(--secondary-teal);">{{ profile.cgpa if
                        profile else '0.0' }}</p>
                </div>
                <div style="margin-bottom: 20px;">
                    <p style="font-size: 12px; color: #999; text-transform: uppercase; font-weight: 700;">Passing Year
                    </p>
                    <p style="font-weight: 600;">{{ profile.passing_year if profile else 'Not Set' }}</p>
                </div>
                <div>
                    <p style="font-size: 12px; color: #999; text-transform: uppercase; font-weight: 700;">Skills</p>
                    <p style="font-size: 14px;">{{ profile.skills if profile else 'None' }}</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}